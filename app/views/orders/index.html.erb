<div class="container">
  <h1>All Orders</h1>
  <% @orders.each do |order| %>
    <div class="card mt-3">
      <div class="card-body">
        <p class="card-text">Order ID: <%= order.id %></p>
        <p class="card-text">Status: <%= order.status %></p>

        <!-- Order Items -->
        <h6 class="card-subtitle mb-2 text-muted">Order Items:</h6>
        <% total_price = 0 %>
        <% if order.order_items.present? %>
          <ul class="list-group">
            <% order.order_items.each do |order_item| %>
              <li class="list-group-item">
                <%= order_item.quantity %> x <%= order_item.zord.name %> - <%= number_to_currency(order_item.zord.price) %>
              </li>
              <% total_price += order_item.quantity * order_item.zord.price %>
            <% end %>
          </ul>
        <% else %>
          <p class="card-text">No order items found</p>
        <% end %>

        <!-- Total Price -->
        <p class="card-text mt-3">Total Price: <%= number_to_currency(total_price) %></p>

        <!-- Buttons -->
        <div class="mt-3">
          <%= link_to "View Order Details", order_path(order), class: "btn btn-primary mr-2" %>
          <%= link_to "Order Again", orders_path(order: order), class: "btn btn-success" %>
          <%= link_to "Sell", orders_path(order: order), class: "btn btn-danger" %>
        </div>
      </div>
    </div>
  <% end %>
</div>
